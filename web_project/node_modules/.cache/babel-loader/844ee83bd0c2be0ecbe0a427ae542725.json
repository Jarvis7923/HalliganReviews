{"ast":null,"code":"var _jsxFileName = \"/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/src/components/navigation/SearchBar.jsx\";\nimport React from \"react\";\nimport { FormControl } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\";\nimport DropDownMenu from \"./DropDownMenu\";\nimport \"./SearchBar.css\";\nimport serverBackEnd from \"../../fakeBackEnd\";\nexport default function SearchBar(props) {\n  const [attributes, setAttributes] = React.useState({\n    queryStr: \"\",\n    showDropDown: false,\n    showCancelButton: \"hidden\"\n  });\n  const [searchCandidate, setSearchCandidate] = React.useState([]);\n\n  function handleSearchText(event) {\n    var value = event.target.value;\n    setAttributes(prev => ({ ...prev,\n      queryStr: value,\n      showDropDown: value.length > 0 ? true : false,\n      showCancelButton: value.length > 0 ? \"visible\" : \"hidden\"\n    }));\n    const response = {};\n    const cmdSearch = {\n      type: \"search\",\n      query: {\n        queryString: value,\n        order: \"relevant\"\n      }\n    };\n    serverBackEnd.get(cmdSearch, response);\n    setSearchCandidate(response.result);\n  }\n\n  function clearContent(event) {\n    setAttributes(prev => ({ ...prev,\n      queryStr: \"\",\n      showCancelButton: \"hidden\"\n    }));\n    document.getElementById(\"search-bar\").focus();\n  }\n\n  const history = useHistory();\n\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      let path = `/search/${attributes.queryStr}`;\n      history.push(path);\n      setAttributes(prev => ({ ...prev,\n        queryStr: \"\",\n        showCancelButton: \"hidden\",\n        showDropDown: false\n      }));\n      document.getElementById(\"search-bar\").blur();\n    }\n  };\n\n  const escFunction = React.useCallback(event => {\n    if (event.keyCode === 27) {\n      setAttributes(prev => ({ ...prev,\n        showDropDown: false\n      }));\n      document.getElementById(\"search-bar\").blur();\n    }\n  }, []);\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  }, [escFunction]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-wrap\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-group input-group\",\n    style: attributes.showDropDown ? {\n      borderRadius: \"19px 19px 0 0\",\n      borderBottom: \"none\"\n    } : {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-icon input-group-prepend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-icon input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"search-icon fas fa-search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(FormControl, {\n    onChange: handleSearchText,\n    value: attributes.queryStr,\n    onKeyPress: handleKeyPress,\n    onFocus: e => {\n      attributes.queryStr && setAttributes(prev => ({ ...prev,\n        showDropDown: true\n      }));\n    },\n    id: \"search-bar\",\n    type: \"text\",\n    placeholder: \"Search\",\n    autoComplete: \"off\",\n    className: \"search-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: clearContent,\n    id: \"search-bar-clear-btn\",\n    className: \"btn btn-default\",\n    style: {\n      visibility: [attributes.showCancelButton]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-times-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }))), attributes.showDropDown && /*#__PURE__*/React.createElement(DropDownMenu, {\n    candidate: searchCandidate,\n    onUpdate: props.onUpdate,\n    attributes: attributes,\n    setAttributes: setAttributes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/jingkaisu/Documents/HRfront/HalliganReviews/web_project/src/components/navigation/SearchBar.jsx"],"names":["React","FormControl","useHistory","DropDownMenu","serverBackEnd","SearchBar","props","attributes","setAttributes","useState","queryStr","showDropDown","showCancelButton","searchCandidate","setSearchCandidate","handleSearchText","event","value","target","prev","length","response","cmdSearch","type","query","queryString","order","get","result","clearContent","document","getElementById","focus","history","handleKeyPress","e","key","preventDefault","path","push","blur","escFunction","useCallback","keyCode","useEffect","addEventListener","removeEventListener","borderRadius","borderBottom","visibility","onUpdate"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { FormControl } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\";\n\n\nimport DropDownMenu from \"./DropDownMenu\";\n\nimport \"./SearchBar.css\";\n\nimport serverBackEnd from \"../../fakeBackEnd\";\n\n\nexport default function SearchBar(props) {\n  const [attributes, setAttributes] = React.useState({\n    queryStr: \"\",\n    showDropDown: false,\n    showCancelButton: \"hidden\",\n  });\n\n  const [searchCandidate, setSearchCandidate] = React.useState([]);\n\n  function handleSearchText(event) {\n    var value = event.target.value;\n    setAttributes((prev) => ({\n      ...prev,\n      queryStr: value,\n      showDropDown: value.length > 0 ? true : false,\n      showCancelButton: value.length > 0 ? \"visible\" : \"hidden\",\n    }));\n\n    const response = {};\n    const cmdSearch = {\n      type: \"search\",\n      query: { queryString: value, order: \"relevant\" },\n    };\n\n    serverBackEnd.get(cmdSearch, response);\n\n\n    setSearchCandidate(response.result);\n  }\n\n  function clearContent(event) {\n    setAttributes((prev) => ({\n      ...prev,\n      queryStr: \"\",\n      showCancelButton: \"hidden\",\n    }));\n\n    document.getElementById(\"search-bar\").focus();\n  }\n\n  const history = useHistory();\n\n  const handleKeyPress = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      let path = `/search/${attributes.queryStr}`; \n      history.push(path);\n      \n      setAttributes((prev) => ({\n        ...prev,\n        queryStr: \"\",\n        showCancelButton: \"hidden\",\n        showDropDown: false,\n      }));\n      document.getElementById(\"search-bar\").blur();\n    }\n  };\n\n  const escFunction = React.useCallback((event) => {\n    if (event.keyCode === 27) {\n      setAttributes((prev) => ({\n        ...prev,\n        showDropDown: false,\n      }));\n      document.getElementById(\"search-bar\").blur();\n    }\n  }, []);\n\n  React.useEffect(() => {\n    document.addEventListener(\"keydown\", escFunction, false);\n\n    return () => {\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  }, [escFunction]);\n\n  return (\n    <div className='search-wrap'>\n      <div\n        className='search-group input-group'\n        style={\n          attributes.showDropDown\n            ? {\n                borderRadius: \"19px 19px 0 0\",\n                borderBottom: \"none\",\n              }\n            : {}\n        }>\n        <div className='search-icon input-group-prepend'>\n          <div className='search-icon input-group-text'>\n            <i className='search-icon fas fa-search'></i>\n          </div>\n        </div>\n        <FormControl\n          onChange={handleSearchText}\n          value={attributes.queryStr}\n          onKeyPress={handleKeyPress}\n          onFocus={(e) => {\n            attributes.queryStr &&\n              setAttributes((prev) => ({\n                ...prev,\n                showDropDown: true,\n              }));\n          }}\n          id='search-bar'\n          type='text'\n          placeholder='Search'\n          autoComplete='off'\n          className='search-form'\n        />\n        <button\n          onClick={clearContent}\n          id='search-bar-clear-btn'\n          className='btn btn-default'\n          style={{ visibility: [attributes.showCancelButton] }}>\n          <i className='far fa-times-circle'></i>\n        </button>\n      </div>\n      {attributes.showDropDown && (\n        <DropDownMenu\n          candidate={searchCandidate}\n          onUpdate={props.onUpdate}\n          attributes={attributes}\n          setAttributes={setAttributes}\n        />\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}